(this.webpackJsonpslider=this.webpackJsonpslider||[]).push([[0],{19:function(e,t,n){e.exports=n(43)},24:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),s=n(17),a=n.n(s),i=(n(24),n(2)),c=n(3),u=n(5),l=n(4),p=n(6),h=n(18),f=n.n(h),m=(n(42),n(7)),d=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).katt=function(){n.props.parentCallback(n.props.index)},n.getCoords=n.getCoords.bind(Object(m.a)(n)),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getCoords",value:function(e,t,n){return{col:Math.floor(e/n),row:e%n}}},{key:"render",value:function(){var e=this,t=this.getCoords(this.props.index,this.props.rows,this.props.cols),n={position:"absolute",border:"1px solid white",backgroundClip:"content-box",backgroundRepeat:"no-repeat",width:this.props.img.width/4,height:this.props.img.height/4,backgroundPosition:this.props.backgroundPos,backgroundImage:"url("+this.props.img.src+")",left:this.props.img.width/4*t.row,top:this.props.img.height/4*t.col,fontSize:"8px"},o=(this.props.hole,this.props.rows,this.props.cols,this.props.index,this.props.number);return r.a.createElement("div",{ref:this.props.innerRef,style:n,onClick:function(t){return e.katt(t)}},this.props.hole===o?"":o+1)}}]),t}(r.a.Component),g=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).checkSolved=function(e,t){for(var n=e.length;n--;)if(e[n]!==t[n])return!1;return!0},n.getCoords=function(e,t,n){return{col:Math.floor(e/n),row:e%n}},n.canMove=function(e){if(e<0||e>=16)return!1;var t=n.state.holePosition-e;return-1===t?e%n.props.rows!==0:1===t?n.state.holePosition%n.props.rows!==0:Math.abs(t)===n.props.rows},n.shuffle=function(){n.setState((function(e){return{solved:!1}})),n.state.shiftCounter>=50?n.setState((function(e){return{shiftCounter:0,isShuffling:!1}})):n.setState((function(e){return{isShuffling:!0}})),n.setState((function(e){return{shiftCounter:e.shiftCounter+1}}));var e=[-4,4,-1,1],t=e[Math.floor(Math.random()*e.length)],o=n.state.holePosition+t;n.swap(o)},n.getNewLayout=function(e,t,n){var o=(e=e.slice(0))[n];return e[n]=e[t],e[t]=o,e},n.swap=function(e){var t=n.state.numbers,o=n.state.holePosition;if(n.canMove(e)){var r=n.getNewLayout(t,e,o);n.setState((function(t){return{numbers:r,holePosition:e}}))}n.checkSolved(n.state.numbers,n.props.identifiers)&&n.setState((function(e){return{solved:!0}}))},n.getBackgroundPos=function(e,t){var o=n.getCoords(e,n.props.rows,n.props.cols);return o.row*=-1,o.col*=-1,t.width/4*o.row+"px"+" "+(t.height/4*o.col+"px")},n.reRenderWhenSolved=function(){n.setState((function(e){return{solved:!1}})),n.shuffle()},n.state={shiftCounter:0,isShuffling:!1,checkSolved:n.checkSolved.bind(Object(m.a)(n)),solved:!1,numbers:n.props.numbers,holePosition:n.props.numbers.indexOf(n.props.hole),image:"https://unsplash.it/400/400"},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){this.state.isShuffling&&this.state.shiftCounter<=50&&this.shuffle()}},{key:"componentDidMount",value:function(){this.shuffle()}},{key:"render",value:function(){var e=this,t=new Image;t.src=this.props.image,t.width=400,t.height=400;var n=new Image;if(n.src="https://i.pinimg.com/736x/25/10/1f/25101f6abb216898babcb5498197f5cb.jpg",this.state.solved){return r.a.createElement("div",{style:{position:"absolute",width:"50vw",left:"25vw"}},r.a.createElement("img",{alt:"yay",src:"https://media.giphy.com/media/yoJC2GnSClbPOkV0eA/source.gif"}),r.a.createElement("button",{type:"button",onClick:function(t){t.preventDefault(),e.reRenderWhenSolved(t)}},"New game with same image"),r.a.createElement("button",{type:"button",onClick:function(t){t.preventDefault(),e.props.parentCallback()}},"Get new image"))}return r.a.createElement("div",{style:{width:"400px",height:"400px",position:"relative"}},this.state.numbers.map((function(o,s){return r.a.createElement(d,{rows:e.props.rows,cols:e.props.cols,img:o===e.props.hole?n:t,backgroundPos:e.getBackgroundPos(o,t),index:e.props.identifiers[s],number:o,key:e.props.identifiers[s],parentCallback:e.swap,hole:e.props.hole})})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.checkSolved(t.numbers,e.identifiers)?{solved:!0}:null}}]),t}(r.a.Component),b=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("img",{src:this.props.src,className:this.props.className,onClick:function(t){return e.props.click(e.props.src)},alt:"please choose me"})}}]),t}(r.a.Component),v=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).start=function(e){n.setState((function(t){return{gameOn:!0,image:e}}))},n.getSquareImagesFromFlickr=function(e){try{return f.a.get(e)}catch(t){console.error(t)}},n.setImages=function(){n.setState((function(e){return{gameOn:!1,images:[],ready:!1}})),console.log("go");for(var e=6,t=[],o="https://api.flickr.com/services/rest/?method=flickr.groups.pools.getPhotos&api_key=".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/tilitoli"}).REACT_APP_FLICKR_API_KEY,"&group_id=").concat("17449586@N00","&extras=url_w&per_page=").concat(100,"&page=1&format=json&nojsoncallback=1");e>0;)t.push(Math.floor(100*Math.random())),e-=1;n.getSquareImagesFromFlickr(o).then((function(e){var o=t.map((function(t){return e.data.photos.photo[t].url_w}));n.setState((function(e){return{images:o,ready:!0}}))})).catch((function(e){console.log(e)}))},n.resizeImages=function(e){},n.state={image:"https://source.unsplash.com/random/400x400",images:[],ready:!1,gameOn:!1,shiftCounter:0,isShuffling:!1,solved:!1},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setImages()}},{key:"render",value:function(){var e=this;return this.state.gameOn?r.a.createElement("div",{className:"wrapper"},r.a.createElement(g,{rows:4,cols:4,numbers:[0,1,2,3,4,5,6,7,8,9,10,15,12,13,14,11],hole:15,identifiers:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],image:this.state.image,parentCallback:this.setImages})):this.state.ready?r.a.createElement("div",{className:"imageOptionWrapper"},r.a.createElement("div",{className:"top"},"Dili-Toli!"),this.state.images.map((function(t,n){return r.a.createElement(b,{key:n,src:t,className:"option".concat(n),click:e.start})})),r.a.createElement("div",{className:"bottom",onClick:function(t){return e.setImages(t)}},"Get new images")):r.a.createElement("div",{className:"wrapper"},r.a.createElement("img",{className:"spinner",alt:"puzzle-shaped loading spinner"}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.09aaba37.chunk.js.map